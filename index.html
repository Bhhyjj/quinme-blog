<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Quinme Stories</title>

  <!-- PWA -->
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#6200ea" />

  <style>
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin:0; padding:0; background:#fafafa; color:#222; transition:.3s background,.3s color; }
    body.dark { background:#1e1e1e; color:#f5f5f5; }
    header { background:#6200ea; color:#fff; padding:20px; text-align:center; position:relative; }
    nav { display:flex; justify-content:center; flex-wrap:wrap; background:#3700b3; }
    nav a { color:#fff; padding:14px 20px; text-decoration:none; display:block; }
    nav a.active, nav a:hover { background:#6200ea; }
    section { padding:20px; max-width:900px; margin:auto; }
    footer { background:#333; color:#fff; text-align:center; padding:10px; margin-top:20px; }
    button { margin-top:5px; padding:10px 14px; border:none; background:#6200ea; color:#fff; cursor:pointer; border-radius:6px; }
    button:hover { background:#3700b3; }
    .toggle { background:#444; position:absolute; right:15px; top:15px; }
    textarea { width:100%; height:150px; margin-top:10px; padding:10px; border:1px solid #ccc; border-radius:6px; resize:vertical; font-size:14px; }
    .story-box { margin-bottom:20px; padding:15px; border:1px solid #ddd; border-radius:8px; background:#fff; box-shadow:0 2px 5px rgba(0,0,0,.1); }
    body.dark .story-box { background:#2a2a2a; border-color:#555; }
    .delete-btn { background:crimson; margin-left:10px; }
    .install-btn { position:fixed; right:20px; bottom:20px; border-radius:8px; }
  </style>
</head>
<body>
  <header>
    <h1>✨ Quinme Stories ✨</h1>
    <button class="toggle" onclick="toggleTheme()">🌙</button>
    <p>Beneath the Veil | The Tide Between Us | and more...</p>
  </header>

  <nav>
    <a href="#home" class="active" onclick="setActive(this)">Home</a>
    <a href="#stories" onclick="setActive(this)">Stories</a>
    <a href="#write" onclick="setActive(this)">Write</a>
    <a href="#about" onclick="setActive(this)">About</a>
    <a href="#contact" onclick="setActive(this)">Contact</a>
  </nav>

  <section id="home">
    <h2>Welcome</h2>
    <p>Step into my world of stories filled with mystery, romance, and imagination. Explore my works below!</p>
  </section>

  <section id="stories">
    <h2>📚 My Stories</h2>

    <div class="story-box">
      <h3>The Tide Between Us</h3>
      <p id="tide-text">Chapter One: The waves crashed against the shore as secrets long buried began to resurface...</p>
      <button onclick="speakById('tide-text')">🔊 Listen</button>
    </div>

    <div class="story-box">
      <h3>Beneath the Veil</h3>
      <p id="veil-text">Chapter One: In the shadow of silence, whispers carried truths no one dared to speak...</p>
      <button onclick="speakById('veil-text')">🔊 Listen</button>
    </div>

    <h3>Your Published Stories</h3>
    <div id="postedStories"></div>
  </section>

  <section id="write">
    <h2>📝 Write Your Story</h2>
    <p>Post your new chapter here:</p>
    <textarea id="storyInput" placeholder="Start writing your story..."></textarea><br/>
    <button onclick="postStory()">Publish</button>
  </section>

  <section id="about">
    <h2>👩 About Me</h2>
    <p>Hi, I’m <strong>Quinme</strong> — a storyteller who loves turning imagination into reality through words. My stories mix mystery, romance, and sometimes a touch of horror.</p>
  </section>

  <section id="contact">
    <h2>📩 Contact</h2>
    <ul>
      <li><a href="https://www.wattpad.com/user/Quin_quinme" target="_blank">Wattpad</a></li>
      <li><a href="https://www.facebook.com/share/1FMnjoy8Ku/?mibextid=wwXIfr" target="_blank">Facebook</a></li>
    </ul>
  </section>

  <footer>
    <p>© 2025 Quinme | All Rights Reserved</p>
  </footer>

  <script>
    // ---- Voice (TTS)
    function speak(text) {
      const u = new SpeechSynthesisUtterance(text);
      u.lang = "en-US";
      speechSynthesis.speak(u);
    }
    function speakById(id) {
      const text = document.getElementById(id).innerText;
      speak(text);
    }

    // ---- Theme
    function toggleTheme() {
      document.body.classList.toggle("dark");
      localStorage.setItem("theme", document.body.classList.contains("dark") ? "dark" : "light");
    }

    // ---- Stories (Local Save)
    function postStory() {
      const el = document.getElementById("storyInput");
      const text = el.value.trim();
      if (!text) return;
      const stories = JSON.parse(localStorage.getItem("stories") || "[]");
      stories.push(text);
      localStorage.setItem("stories", JSON.stringify(stories));
      el.value = "";
      displayStories();
    }
    function deleteStory(index) {
      const stories = JSON.parse(localStorage.getItem("stories") || "[]");
      stories.splice(index, 1);
      localStorage.setItem("stories", JSON.stringify(stories));
      displayStories();
    }
    function displayStories() {
      const stories = JSON.parse(localStorage.getItem("stories") || "[]");
      const container = document.getElementById("postedStories");
      container.innerHTML = "";
      stories.forEach((story, i) => {
        const div = document.createElement("div");
        div.className = "story-box";
        const h = document.createElement("h3"); h.textContent = `Story ${i+1}`;
        const p = document.createElement("p"); p.textContent = story;
        const listen = document.createElement("button"); listen.textContent = "🔊 Listen";
        listen.addEventListener("click", () => speak(story));
        const del = document.createElement("button"); del.textContent = "❌ Delete"; del.className = "delete-btn";
        del.addEventListener("click", () => deleteStory(i));
        div.append(h, p, listen, del);
        container.appendChild(div);
      });
    }

    // ---- Nav Active
    function setActive(link) {
      document.querySelectorAll("nav a").forEach(a => a.classList.remove("active"));
      link.classList.add("active");
    }

    // ---- PWA Install prompt
    let deferredPrompt;
    window.addEventListener("beforeinstallprompt", (e) => {
      e.preventDefault();
      deferredPrompt = e;
      const btn = document.createElement("button");
      btn.className = "install-btn";
      btn.textContent = "📲 Install App";
      document.body.appendChild(btn);
      btn.addEventListener("click", async () => {
        btn.remove();
        deferredPrompt.prompt();
        await deferredPrompt.userChoice;
        deferredPrompt = null;
      });
    });

    // ---- Service Worker
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("./sw.js", { scope: "./" })
        .then(() => console.log("Service Worker registered"));
    }

    // ---- Init
    window.onload = () => {
      if (localStorage.getItem("theme") === "dark") document.body.classList.add("dark");
      displayStories();
    };
  </script>
</body>
</html>
</body>
</html>
